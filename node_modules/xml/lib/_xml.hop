;*=====================================================================*/
;*    serrano/prgm/project/hop/hop/node_modules/feed/lib/_feed.hop     */
;*    -------------------------------------------------------------    */
;*    Author      :  Manuel Serrano                                    */
;*    Creation    :  Thu Sep  6 15:19:35 2018                          */
;*    Last change :  Mon Mar  9 10:03:25 2020 (serrano)                */
;*    Copyright   :  2018-20 Manuel Serrano                            */
;*    -------------------------------------------------------------    */
;*    FEED Hop parser                                                  */
;*=====================================================================*/

;*---------------------------------------------------------------------*/
;*    The module                                                       */
;*---------------------------------------------------------------------*/
(module _feedn

   (library hopscript hop hopwidget nodejs web)
   
   (export (hopscript ::JsGlobalObject ::JsObject ::JsObject ::JsObject)))

;*---------------------------------------------------------------------*/
;*    hopscript ...                                                    */
;*---------------------------------------------------------------------*/
(define (hopscript %this this scope module)
   (with-access::JsGlobalObject %this (__proto__)

      (define exports (js-get module (& "exports") %this))

      (js-bind! %this exports (& "createElement")
	 :value (js-make-function %this
		   (lambda (this tag attrs nodes)
		      (instantiate::xml-element
			 (tag (string->symbol (js-tostring tag %this)))
			 (attributes (js-jsobject->keyword-plist attrs %this))
			 (body (xml-unpack nodes %this))))
		   (js-function-arity 3 0)
		   (js-function-info :name "createElement" :len 3))
	 :writable #f
	 :enumerable #f)))

      

