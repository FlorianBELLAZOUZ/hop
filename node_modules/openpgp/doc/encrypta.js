/*=====================================================================*/
/*    .../project/hop/hop/node_modules/openpgp/doc/encrypta.js         */
/*    -------------------------------------------------------------    */
/*    Author      :  Manuel Serrano                                    */
/*    Creation    :  Thu Feb  4 08:26:09 2021                          */
/*    Last change :  Thu Feb  4 15:06:25 2021 (serrano)                */
/*    Copyright   :  2021 Manuel Serrano                               */
/*    -------------------------------------------------------------    */
/*    Example of openpgp module                                        */
/*=====================================================================*/
"use hopscript";

import { readKey, encrypt, KeyRing } from hop.openpgp;

// asymmetric encryption with a public/private pair
const [ skey ] = readKey( "./example.skey" );
const [ pkey ] = readKey( "./example.pkey" );

const secret = "JavaScript is a descendant of Scheme";
const composition = encrypt( secret, [ pkey ] );
const keyRing = new KeyRing( skey );

console.log( composition.toString() );
console.log( composition.decrypt( { passwordProvider: key => "foobargee", keyManager: keyRing } ) );
