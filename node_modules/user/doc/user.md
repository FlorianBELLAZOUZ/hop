${ var doc = require( "hopdoc" ) }

User Management
===============

This module exports functions that controls users declarations.

Use `require( hop.user )` to use it.

### user.add( user ) ###
[:@glyphicon glyphicon-tag function]

Declares a new user in the Hop user database.

User identification is demanded by the Web server to reply to HTTP request.
When the server receives a request, it first try to authenticate it. If
the authentication fails, it responses with a `403 Forbidden` response.
Otherwise, it checks if the authentication user is allowed to be
responded by checking the user  services and user directories.

${ <span class="label label-warning">Note:</span> }
The function `user.add` can only be called before the Hop server starts.
It must then be called from the `hoprc.js` file, or from of the module
required by `hoprc.js`, or from one of the modules
mentionned on the command line.
[:@warning]

The attributes of the `user` parameter are:

 * `name`: a string, the user name.
 * `uuid`: a optional string, a universal user ID.
 * `password`: the encrypted user password (see `user.passwordEncrypt`).
 * `services`: either the string `"\*"` or an array of strings.
 * `directories`: either the string `"\*"` or an array of strings.
 * `groups`: an optional array of strings.
 * `preferencesFilename`: a optional string.

Example:

```hopscript
var hop = require( "hop" );
var user = require( hop.user );
var config = require( hop.config );

user.add( { name: "music-player",
	    password: "+2606e88da9174caa886db5b916f3cd79",
	    groups: [ "music" ],
	    services: [ "public", "hopdac" ],
	    directories: config.path.concat( [
	       process.env.HOME + "/prgm/project/hop/weblets/hopdac",
	       "/mmedia/music" ] )
	  } );
```


### user.passwordEncrypt( name, password ) ###
[:@glyphicon glyphicon-tag function]

Computed the encrypted password for user name and clear password. 

Example:

```hopscript
user.passwordEncrypt( "dupont", "K555`!e" );
```



