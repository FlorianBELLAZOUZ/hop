#*=====================================================================*/
#*    serrano/prgm/project/hop/hop/node_modules/exif/node/Makefile     */
#*    -------------------------------------------------------------    */
#*    Author      :  manuel serrano                                    */
#*    Creation    :  Fri Oct 27 07:55:44 2023                          */
#*    Last change :  Tue Mar 26 12:28:17 2024 (serrano)                */
#*    Copyright   :  2023-24 manuel serrano                            */
#*    -------------------------------------------------------------    */
#*    Node's exif precompilation                                       */
#*=====================================================================*/
do: build

#*---------------------------------------------------------------------*/
#*    Configuration                                                    */
#*---------------------------------------------------------------------*/
include ../../Makefile.modules

EXIF_SRC=exif.scm

BEAUTIFY=cat

#*---------------------------------------------------------------------*/
#*    Goals                                                            */
#*---------------------------------------------------------------------*/
build: exif.mjs

exif.mjs: exif-module.js exif.scm
	cat exif-module.js > $@
	$(BUILDBINDIR)/mkjsast javascript $(EXIF_SRC:%.scm=%) | $(BEAUTIFY) >> $@
	echo "// generated by hop2js" >> $@
	$(BUILDBINDIR)/hop2js $(EXIF_SRC) | $(BEAUTIFY) >> $@

clean:
	rm -f exif.mjs

cleanall: clean

