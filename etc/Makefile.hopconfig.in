#*=====================================================================*/
#*    serrano/prgm/project/hop/2.1.x/etc/Makefile.hopconfig.in         */
#*    -------------------------------------------------------------    */
#*    Author      :  Manuel Serrano                                    */
#*    Creation    :  Fri Sep 17 14:27:28 2004                          */
#*    Last change :  Fri Apr 23 08:21:08 2010 (serrano)                */
#*    Copyright   :  2004-10 Manuel Serrano                            */
#*    -------------------------------------------------------------    */
#*    The autconf Makefile skeleton for HOP.                           */
#*=====================================================================*/

#*---------------------------------------------------------------------*/
#*    The version                                                      */
#*---------------------------------------------------------------------*/
HOPRELEASE	= @RELEASE@
HOPDEVEL	= @DEVEL@
HOPBRANCH	= @BRANCH@
HOPDATE		= @DATE@

#*---------------------------------------------------------------------*/
#*    Compilers, tools, and misc configuration                         */
#*---------------------------------------------------------------------*/
# the Bigloo compiler
BIGLOO          = @BIGLOO@
HOPC		= @HOPC@
HFLAGS		= --bigloo=$(BIGLOO) -L $(BUILDLIBDIR) --share-dir $(BUILDSHAREDIR) --
BACKEND         = @BACKEND@
BIGLOOLIBDIR	= @BIGLOOLIBDIR@
CIGLOO		= @CIGLOO@
AFILE		= @AFILE@
JFILE		= @JFILE@
BTAGS		= @BTAGS@
DEPEND		= @BDEPEND@
UNZIP		= @UNZIP@
JAR		= @JAR@
FLASHCC		= @FLASHCC@
GZIP		= @GZIP@

BMASK		= 755
INSTALL		= @INSTALL@

#*---------------------------------------------------------------------*/
#*    Compilation flags                                                */
#*---------------------------------------------------------------------*/
DEBUG		= @DEBUG@
CCOMP		= @CC@
BCFLAGS		= @BCFLAGS@ -cc $(CCOMP) -copt "$(CCFLAGS)" $(EFLAGS)
BTFLAGS		= @BTFLAGS@
BCFLAGSDEV	= @BCFLAGSDEV@
BCFLAGSRTS	= @BCFLAGSRTS@
FFLAGS		= @FFLAGS@
BLFLAGS         = @BLFLAGS@ $(BLIBFLAGS)
BJVMFLAGS	= @BCFLAGS@ -jvm $(EFLAGS)
BLJVMFLAGS      = @BLFLAGS@ -jvm-purify -unsafe
BEJVMFLAGS	= -jvm-jar
BDOTNETFLAGS	= @BCFLAGS@ -dotnet -dotnet-mono-workaround -dotnet-pnet-workaround -dotnet-managed $(EFLAGS)
BLDOTNETFLAGS   = @BLFLAGS@ 
BHFLAGS		= -q -mkaddheap -mkaddlib $(EFLAGS)
BJFLAGS		= -j
CCFLAGS		= @CCFLAGS@

BIGLOOPTHLIB	= @BIGLOOPTHLIB@
BIGLOOSSLLIB	= @BIGLOOSSLLIB@

BSCM2JSFLAGS	= @BSCM2JSFLAGS@

#*---------------------------------------------------------------------*/
#*    Linking                                                          */
#*---------------------------------------------------------------------*/
BGLCLOSELIBS	= $(BIGLOOPTHLIB) \
                  $(BIGLOOSSLLIB) \
                  -lbiglooweb_s-$(RELEASE) \
                  -lbigloomultimedia_s-$(RELEASE)

#*---------------------------------------------------------------------*/
#*    Build                                                            */
#*---------------------------------------------------------------------*/
BUILDETCDIR	= @BUILDETCDIR@
BUILDBINDIR	= @BUILDBINDIR@
BUILDLIBDIR	= @BUILDLIBDIR@
BUILDSHAREDIR	= @BUILDSHAREDIR@
DISTRIBDIR	= @DISTRIBDIR@

#*---------------------------------------------------------------------*/
#*    Destinations                                                     */
#*---------------------------------------------------------------------*/
HOPPREFIX	= @PREFIX@
HOPETCDIR	= @ETCDIR@
HOPBINDIR	= @BINDIR@
HOPLIBDIR	= @LIBDIR@
HOPSHAREDIR	= @SHAREDIR@
HOPMANDIR	= @MANDIR@
HOPWEBLETSDIR	= @WEBLETSDIR@
HOPCONTRIBSDIR	= @CONTRIBSDIR@

HOPFILDIR	= hop/$(HOPRELEASE)
HOPDEMOSDIR	= $(HOPSHAREDIR)/demos

#*---------------------------------------------------------------------*/
#*    Runtime system                                                   */
#*---------------------------------------------------------------------*/
RTSCONFIG	= @RTSCONFIG@

#*---------------------------------------------------------------------*/
#*    JVM zips                                                         */
#*---------------------------------------------------------------------*/
JVMZIPLIBS	= @JVMZIPLIBS@
JVMINITS	= @JVMINITS@

#*---------------------------------------------------------------------*/
#*    Apache Felix                                                     */
#*---------------------------------------------------------------------*/
FELIX_JAR       = @FELIX_JAR@

#*---------------------------------------------------------------------*/
#*    REPOSITORY                                                       */
#*---------------------------------------------------------------------*/
HOPSVN		= @HOPSVN@
HOPTMPDIR	= /tmp
HOPDISTRIBDIR	= @HOPDISTRIBDIR@

#*---------------------------------------------------------------------*/
#*    compile                                                          */
#*---------------------------------------------------------------------*/
.PHONY: showvar compile compile2 link

showvar = echo -n """$(1)=\"$($(1))\""
ifeq ($(findstring -n,$(filter-out --no-print-directory,$(MAKEFLAGS))),-n)
done = echo "$(2)$(1)$(3)$(4)"
else
done = if [ "$$TERM" = "rxvt" ]; then echo "$(2)[0m[1;$(1)m$(3)[0m$(4)"; else echo "$(2)$(1)$(3)$(4)"; fi
endif

ifeq ($(findstring -n,$(filter-out --no-print-directory,$(MAKEFLAGS))),-n)
compile = $($(1)) $($(2)) $(3)
else
ifneq (,$(findstring s,$(MAKEFLAGS)))
compile = echo "$($(1)) $($(2)) $(3)"; $($(1)) $($(2)) $(3)
else
compile = if [ "$$TERM" = "rxvt" ]; then echo "$$""$(1) $$""$(2) [0m[1;30m$(3)[0m"; else echo "$($(1)) $($(2)) $(3)"; fi; $($(1)) $($(2)) $(3)
endif
endif

ifeq ($(findstring -n,$(filter-out --no-print-directory,$(MAKEFLAGS))),-n)
compile0 = $($(1)) $(2)
else
ifneq (,$(findstring s,$(MAKEFLAGS)))
compile0 = echo "$($(1)) $($(2))"; $($(1)) $(2)
else
compile0 = echo "$$""$(1) $(2)"; $($(1)) $(2)
endif
endif

ifeq ($(findstring -n,$(filter-out --no-print-directory,$(MAKEFLAGS))),-n)
compile2 = $($(1)) $($(2)) $($(3)) $(4)
else
ifneq (,$(findstring s,$(MAKEFLAGS)))
compile2 = echo "$($(1)) $($(2)) $($(3)) $(4)"; $($(1)) $($(2)) $($(3)) $(4)
else
compile2 = if [ "$$TERM" = "rxvt" ]; then echo "$$""$(1) $$""$(2) $$""$(3) [0m[1;30m$(4)[0m"; else echo "$($(1)) $($(2)) $($(3)) $(4)"; fi; $($(1)) $($(2)) $($(3)) $(4)
endif
endif

ifeq ($(findstring -n,$(filter-out --no-print-directory,$(MAKEFLAGS))),-n)
compile3 = $($(1)) $($(2)) $($(3)) $($(4)) $(5)
else
ifneq (,$(findstring s,$(MAKEFLAGS)))
compile3 = echo "$($(1)) $($(2)) $($(3)) $($(4)) $(5)"; $($(1)) $($(2)) $($(3)) $($(4)) $(5)
else
compile3 = if [ "$$TERM" = "rxvt" ]; then echo "$$""$(1) $$""$(2) $$""$(3) $$""$(4) [0m[1;30m$(5)[0m"; else echo "$($(1)) $($(2)) $($(3)) $($(4)) $(5)"; fi; $($(1)) $($(2)) $($(3)) $($(4)) $(5)
endif
endif

ifeq ($(findstring -n,$(filter-out --no-print-directory,$(MAKEFLAGS))),-n)
compile3b = $($(1)) $(5) $($(2)) $($(3)) $($(4))
else
ifneq (,$(findstring s,$(MAKEFLAGS)))
compile3b = echo "$($(1)) $(5) $($(2)) $($(3)) $($(4))"; $($(1)) $(5) $($(2)) $($(3)) $($(4)) 
else
compile3b = if [ "$$TERM" = "rxvt" ]; then echo "$$""$(1) [0m[1;30m$(5)[0m $$""$(2) $$""$(3) $$""$(4)"; else echo "$($(1)) $(5) $($(2)) $($(3)) $($(4))"; fi; $($(1)) $(5) $($(2)) $($(3)) $($(4)) 
endif
endif

ifeq ($(findstring -n,$(filter-out --no-print-directory,$(MAKEFLAGS))),-n)
link = $($(1)) $(2)
else
ifneq (,$(findstring s,$(MAKEFLAGS)))
link = echo "$($(1)) $(2)"; $($(1)) $(2)
else
link = if [ "$$TERM" = "rxvt" ]; then echo "$$""$(1) [0m[1;30m$(2)[0m"; else echo "$($(1)) $(2)"; fi; $($(1)) $(2)
endif
endif

#*---------------------------------------------------------------------*/
#*    showflags                                                        */
#*---------------------------------------------------------------------*/
ifeq ($(findstring -n,$(filter-out --no-print-directory,$(MAKEFLAGS))),-n)
showflags:
else
ifneq (,$(findstring s,$(MAKEFLAGS)))
showflags:
else
showflags:
	@ if [ "$$TERM" = "rxvt" ]; then \
	    echo "BIGLOO=[0m[1;33m$(BIGLOO)[0m"; \
	    echo "BCFLAGS=[0m[1;31m$(BCFLAGS)[0m"; \
	    echo "BCFLAGSDEV=[0m[1;31m$(BCFLAGS)[0m"; \
	    echo "BJVMFLAGS=[0m[1;31m$(BJVMFLAGS)[0m"; \
	    echo "BLFLAGS=[0m[1;31m$(BLFLAGS) $$""(BLIBFLAGS)[0m"; \
	    echo "BLIBFLAGS=[0m[1;31m$(BLIBFLAGS)[0m"; \
	    echo "BHFLAGS=[0m[1;31m$(BHFLAGS)[0m"; \
	    echo "CCFLAGS=[0m[1;31m$(CCFLAGS)[0m"; \
          else \
	    echo "BIGLOO=$(BIGLOO)"; \
	    echo "BCFLAGS=$(BCFLAGS)"; \
	    echo "BCFLAGSDEV=$(BCFLAGS)"; \
	    echo "BJVMFLAGS=$(BJVMFLAGS)"; \
	    echo "BLFLAGS=$(BLFLAGS) $$""(BLIBFLAGS)"; \
	    echo "BLIBFLAGS=$(BLIBFLAGS)"; \
	    echo "BHFLAGS=$(BHFLAGS)"; \
	    echo "CCFLAGS=$(CCFLAGS)"; \
          fi
	@ echo ""
endif
endif

