;*=====================================================================*/
;*    serrano/prgm/project/hop/2.2.x/arch/android/hopdroid/tts.scm     */
;*    -------------------------------------------------------------    */
;*    Author      :  Manuel Serrano                                    */
;*    Creation    :  Mon Nov 29 16:36:58 2010                          */
;*    Last change :  Tue Nov 30 11:14:46 2010 (serrano)                */
;*    Copyright   :  2010 Manuel Serrano                               */
;*    -------------------------------------------------------------    */
;*    Text-to-speech                                                   */
;*=====================================================================*/

;*---------------------------------------------------------------------*/
;*    The module                                                       */
;*---------------------------------------------------------------------*/
(module __hopdroid-tts

   (library multimedia phone hop)

   (import __hopdroid-phone)

   (export (speak ::androidphone ::bstring)))

;*---------------------------------------------------------------------*/
;*    Standard plugins                                                 */
;*---------------------------------------------------------------------*/
(define tts-plugin #f)

;*---------------------------------------------------------------------*/
;*    tts-init ::androidtts ...                                        */
;*---------------------------------------------------------------------*/
(define (tts-init p)
   (unless tts-plugin
      (set! tts-plugin (android-load-plugin p "tts"))))

;*---------------------------------------------------------------------*/
;*    speak ...                                                        */
;*---------------------------------------------------------------------*/
(define (speak p::androidphone text)
   (tts-init p)
   (android-send-command p tts-plugin #\s text))

